"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2125],{2125:(T,b,r)=>{r.r(b),r.d(b,{Tab2Page:()=>w});var c=r(5861),a=r(6196),g=r(6814),l=r(95);const d=(0,r(2726).fo)("BarcodeScanner",{web:()=>r.e(7338).then(r.bind(r,7338)).then(n=>new n.BarcodeScannerWeb)});var y=r(8645),P=r(4036),O=r(9773),e=r(6689),E=r(8828),U=r(2333),N=r(8588);function D(n,m){if(1&n){const s=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-title",3),e._uU(3,"Configuraci\xf3n Qr Scanner"),e.qZA(),e.TgZ(4,"ion-buttons",11)(5,"ion-button",12),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.confirm())}),e._uU(6,"cerrar"),e.qZA()()()(),e._UZ(7,"hr"),e.TgZ(8,"ion-content",13)(9,"ion-list-header",14)(10,"ion-label")(11,"ion-text",15),e._uU(12,"Acciones"),e.qZA()()(),e.TgZ(13,"ion-list",16)(14,"ion-item",17),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.installGoogleBarcodeScannerModule())}),e._UZ(15,"ion-icon",18),e.TgZ(16,"ion-label")(17,"h3"),e._uU(18,"Instalar m\xf3dulo Google Barcode Scanner"),e.qZA()()(),e.TgZ(19,"ion-item",17),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.requestPermissions())}),e._UZ(20,"ion-icon",19),e.TgZ(21,"ion-label")(22,"h3"),e._uU(23,"Petici\xf3n de Permisos"),e.qZA()()(),e.TgZ(24,"ion-item",17),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.openSettings())}),e._UZ(25,"ion-icon",20),e.TgZ(26,"ion-label")(27,"h3"),e._uU(28,"Configuraci\xf3n Aplicaci\xf3n"),e.qZA()()()()()}if(2&n){const s=e.oxw();e.xp6(5),e.Q6J("strong",!0),e.xp6(3),e.Q6J("fullscreen",!0),e.xp6(6),e.Q6J("disabled",!s.isSupported),e.xp6(5),e.Q6J("disabled",s.isPermissionGranted),e.xp6(5),e.Q6J("disabled",!s.isSupported)}}function M(n,m){if(1&n){const s=e.EpF();e.TgZ(0,"ion-button",26),e.NdJ("click",function(){e.CHM(s);const i=e.oxw(2);return e.KtG(i.crearAsistenciaByButtonClick(i.asistencia.id,i.userId))}),e._uU(1," Registrar asistencia "),e.qZA()}if(2&n){const s=e.oxw(2);e.Q6J("disabled",s.asistenciaCreated)}}function k(n,m){if(1&n){const s=e.EpF();e.TgZ(0,"ion-button",27),e.NdJ("click",function(){e.CHM(s);const i=e.oxw(2);return e.KtG(i.deleteAsistenciaByButtonClick(i.asistencia.id,i.userId))}),e._uU(1," Eliminar asistencia | para pruebas "),e.qZA()}}function I(n,m){if(1&n&&(e.TgZ(0,"div",21)(1,"ion-list-header",14)(2,"ion-label")(3,"ion-text",15),e._uU(4,"Control de Asistencia"),e.qZA()()(),e.TgZ(5,"ion-list",16)(6,"ion-item",22)(7,"ion-label")(8,"p"),e._uU(9,"Fecha de Clases:"),e.qZA()(),e._UZ(10,"ion-input",23),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"ion-item",22)(13,"ion-label")(14,"p"),e._uU(15,"Horario:"),e.qZA()(),e._UZ(16,"ion-input",23),e.qZA(),e.TgZ(17,"ion-item",22)(18,"ion-label")(19,"p"),e._uU(20,"Asignatura:"),e.qZA()(),e._UZ(21,"ion-input",23),e.qZA(),e.TgZ(22,"ion-item",22)(23,"ion-label")(24,"p"),e._uU(25,"Secci\xf3n:"),e.qZA()(),e._UZ(26,"ion-input",23),e.qZA(),e.TgZ(27,"ion-item",22)(28,"ion-label")(29,"p"),e._uU(30,"Profesor:"),e.qZA()(),e._UZ(31,"ion-input",23),e.ALo(32,"titlecase"),e.ALo(33,"titlecase"),e.ALo(34,"titlecase"),e.qZA()(),e.YNc(35,M,2,1,"ion-button",24),e.YNc(36,k,2,0,"ion-button",25),e.qZA()),2&n){const s=e.oxw();e.xp6(10),e.s9C("value",e.xi3(11,10,s.asistencia.clases.fecha,"dd MMM, yyyy")),e.xp6(6),e.hYB("value","",s.asistencia.clases.hora_inicio.slice(0,5)," a ",s.asistencia.clases.hora_termino.slice(0,5),""),e.xp6(5),e.s9C("value",s.asistencia.clases.secciones.asignaturas.nombre_asignatura),e.xp6(5),e.s9C("value",s.asistencia.clases.secciones.nombre_seccion),e.xp6(5),e.cQ8("value","",e.lcZ(32,13,s.asistencia.clases.secciones.profesores.nombre)," ",e.lcZ(33,15,s.asistencia.clases.secciones.profesores.apellido_paterno)," ",e.lcZ(34,17,s.asistencia.clases.secciones.profesores.apellido_materno),""),e.xp6(4),e.Q6J("ngIf",s.asistencia),e.xp6(1),e.Q6J("ngIf",s.asistencia)}}let w=(()=>{var n;class m{cancel(){this.modal.dismiss(null,"cancel")}confirm(){this.modal.dismiss(this.name,"confirm")}onWillDismiss(t){"confirm"===t.detail.role&&(this.message=`Hello, ${t.detail.data}!`)}constructor(t,i,o,u,p,v,Z){this.alertController=t,this.loadingController=i,this.navCtrl=o,this.router=u,this.authService=p,this.asistenciaService=v,this.ngZone=Z,this.isSupported=!1,this.isPermissionGranted=!1,this.asistenciaCreated=!1,this.formGroup=new l.nJ({googleBarcodeScannerModuleInstallState:new l.p4(0),googleBarcodeScannerModuleInstallProgress:new l.p4(0)}),this.barcodes=[],this.qrCode="329be335-ae72-4eea-b25b-6f85d5aea90d",this.unsubscribe$=new y.x,this.message="This modal example uses triggers to automatically open a modal when the button is clicked."}ngOnInit(){d.isSupported().then(t=>{this.isSupported=t.supported}),this.userId=this.authService.getCurrentUserId(),this.getUserAsistenciaFromObservable(this.qrCode)}scan(){var t=this;return(0,c.Z)(function*(){if(!(yield t.requestPermissions()))return void t.presentAlert();const{barcodes:o}=yield d.scan();t.qrCode=o[0].displayValue,t.barcodes.push(...o),t.getUserAsistenciaFromObservable(t.qrCode)})()}getUserAsistenciaFromObservable(t){36===t.length?this.asistenciaService.getUserAsistenciaNestedJoinsDetails(t).subscribe({next:i=>{this.asistencia=i[0],this.asistenciaId=i[0].id},error:i=>{console.error("Error occurred:",i)},complete:()=>{console.log("Observable completed")}}):console.log("QR code no pertenece a ninguna asistencia.")}requestPermissions(){return(0,c.Z)(function*(){const{camera:t}=yield d.requestPermissions();return"granted"===t||"limited"===t})()}presentAlert(){var t=this;return(0,c.Z)(function*(){yield(yield t.alertController.create({header:"Permission denied",message:"Please grant camera permission to use the barcode scanner.",buttons:["OK"]})).present()})()}openSettings(){return(0,c.Z)(function*(){yield d.openSettings()})()}installGoogleBarcodeScannerModule(){return(0,c.Z)(function*(){yield d.installGoogleBarcodeScannerModule()})()}goToStudentTabs2(){this.router.navigate(["student","tabs","tab2"])}checkAsistencia(){var t=this;return(0,c.Z)(function*(){t.asistenciaCreated=yield(0,P.z)(t.asistenciaService.checkIfAsistenciaIsAlreadyCreated(t.asistenciaId,t.userId))})()}crearAsistenciaByButtonClick(t,i){var o=this;return(0,c.Z)(function*(){const u=yield o.loadingController.create();yield u.present();const p=yield(0,P.z)(o.asistenciaService.checkIfAsistenciaIsAlreadyCreated(t,i));var Z;yield u.dismiss(),p?yield(yield o.alertController.create({header:"Aviso",message:"\xa1Asistencia previamente registrada!",buttons:["OK"]})).present():yield(yield o.alertController.create({header:"Confirmaci\xf3n",message:"\xbfEst\xe1s seguro de crear esta asistencia?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Asistencia creation canceled")}},{text:"Aceptar",handler:(Z=(0,c.Z)(function*(){o.asistenciaResponse$=o.asistenciaService.createAsistencia(t,i).pipe((0,O.R)(o.unsubscribe$)),o.asistenciaResponse$.subscribe({next:A=>{console.log("Asistencia created successfully:",A),o.showSuccessMessage("Asistencia registrada exitosamente")},error:A=>{console.error("Error creating asistencia:",A)},complete:()=>console.log("createAsistencia completed")})}),function(){return Z.apply(this,arguments)})}]})).present()})()}deleteAsistenciaByButtonClick(t,i){var o=this;return(0,c.Z)(function*(){(yield(0,P.z)(o.asistenciaService.checkIfAsistenciaIsAlreadyCreated(t,i)))&&(o.asistenciaResponse$=o.asistenciaService.deleteAsistencia(t,i).pipe((0,O.R)(o.unsubscribe$)),o.asistenciaResponse$.subscribe({next:p=>{},error:p=>{console.error("Error Eliminando asistencia:",p)},complete:()=>console.log("Asistencia Eliminada completed")}))})()}showSuccessMessage(t){var i=this;return(0,c.Z)(function*(){yield(yield i.alertController.create({header:"\xc9xito",message:t,buttons:["OK"]})).present()})()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return(n=m).\u0275fac=function(t){return new(t||n)(e.Y36(a.Br),e.Y36(a.HT),e.Y36(a.SH),e.Y36(E.F0),e.Y36(U.e),e.Y36(N.l),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-tab2"]],viewQuery:function(t,i){if(1&t&&e.Gf(a.ki,5),2&t){let o;e.iGM(o=e.CRH())&&(i.modal=o.first)}},standalone:!0,features:[e.jDz],decls:14,vars:3,consts:[["collapse","fade",3,"translucent"],["color","dark"],["color","light",1,"centered-title"],["slot","primary"],["id","open-modal-scanner","color","light"],["slot","icon-only","name","settings-outline"],["trigger","open-modal-scanner",3,"willDismiss"],["class","ion-padding",4,"ngIf"],["color","secondary","slot","fixed","vertical","bottom","horizontal","end",1,"heart"],["color","secondary",3,"disabled","click"],["name","scan"],["slot","end"],[3,"strong","click"],[1,"ion-padding",3,"fullscreen"],[1,"ion-list-header-small"],["color","tertiary"],["lines","full",1,"list-custom"],["color","primary","detail","false",3,"disabled","click"],["slot","start","color","medium","name","scan-outline"],["slot","start","color","medium","name","key-outline"],["slot","start","color","medium","name","hammer-outline"],[1,"ion-padding"],["color","primary"],["readonly","",1,"font-size-small","ion-text-right","ion-no-padding-end",3,"value"],["class","ion-button-small","color","secondary","expand","block",3,"disabled","click",4,"ngIf"],["class","ion-button-small","color","secondary","expand","block",3,"click",4,"ngIf"],["color","secondary","expand","block",1,"ion-button-small",3,"disabled","click"],["color","secondary","expand","block",1,"ion-button-small",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2),e._uU(3,"Escanear Asistencia"),e.qZA(),e.TgZ(4,"ion-buttons",3)(5,"ion-button",4),e._UZ(6,"ion-icon",5),e.qZA()(),e.TgZ(7,"ion-modal",6),e.NdJ("willDismiss",function(u){return i.onWillDismiss(u)}),e.YNc(8,D,29,5,"ng-template"),e.qZA()()(),e.TgZ(9,"ion-content"),e.YNc(10,I,37,19,"div",7),e.TgZ(11,"ion-fab",8)(12,"ion-fab-button",9),e.NdJ("click",function(){return i.scan()}),e._UZ(13,"ion-icon",10),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(10),e.Q6J("ngIf",i.asistencia),e.xp6(2),e.Q6J("disabled",!i.isSupported))},dependencies:[a.Pc,a.YG,a.Sm,a.W2,a.IJ,a.W4,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.q_,a.yh,a.yW,a.wd,a.sr,a.ki,a.j9,g.ez,g.O5,g.rS,g.uU,l.UX,l.u5],styles:["[_nghost-%COMP%]   ion-list[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.profile-card[_ngcontent-%COMP%]{border-radius:0;background:linear-gradient(135deg,var(--ion-color-dark),var(--ion-color-primary));width:100%;display:flex;justify-content:center;flex-direction:column;align-items:center;padding:30px;text-align:center}.profile-card[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:128px;height:128px;text-align:center;margin-bottom:30px}.profile-card[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:128px;width:128px;border-radius:50%;border:4px solid var(--ion-color-light);display:inline;box-shadow:0 0 28px #ffffffa6}.centered-title[_ngcontent-%COMP%]{text-align:center;width:120%}.centered-text[_ngcontent-%COMP%]{text-align:left;width:50%}.smaller-ion-content[_ngcontent-%COMP%]{height:30%}body[_ngcontent-%COMP%]{height:100vh;overflow:hidden}.green[_ngcontent-%COMP%]{background:#66ff99}.orange[_ngcontent-%COMP%]{background:rgba(241,124,87,.9803921569)}.blue[_ngcontent-%COMP%]{background:#3652d9}.rose[_ngcontent-%COMP%]{background:#ff66cc}.center[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;height:100vh}.circle[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;box-shadow:0 0 1px 1px #0000001a}.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-animation 2s infinite}@keyframes _ngcontent-%COMP%_pulse-animation{0%{box-shadow:0 0 #0003}to{box-shadow:0 0 0 20px #0000}}.heart[_ngcontent-%COMP%]{color:red;font-size:50px;animation:_ngcontent-%COMP%_heart-pulse 1.5s infinite ease-out}@keyframes _ngcontent-%COMP%_heart-pulse{0%{transform:scale(0)}50%{transform:scale(1.2)}70%{transform:scale(.65)}to{transform:scale(0)}}.master[_ngcontent-%COMP%]{color:#000;float:right}@media (max-width: 900px){.master[_ngcontent-%COMP%]{display:none}}"]}),m})()},4036:(T,b,r)=>{r.d(b,{z:()=>g});var c=r(6973),a=r(305);function g(l,f){const x="object"==typeof f;return new Promise((h,_)=>{const C=new a.Hp({next:d=>{h(d),C.unsubscribe()},error:_,complete:()=>{x?h(f.defaultValue):_(new c.K)}});l.subscribe(C)})}}}]);