"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5457],{5457:(U,Z,i)=>{i.r(Z),i.d(Z,{ClaseDetallesPage:()=>l});var m=i(5861),_=i(6814),v=i(95),t=i(6196),P=i(4036),p=i(7742),e=i(6689),C=i(8828),A=i(1559),E=i(8588);function T(a,r){1&a&&(e.TgZ(0,"ion-item",13)(1,"ion-avatar",14),e._UZ(2,"ion-skeleton-text",15),e.qZA(),e.TgZ(3,"ion-label")(4,"h3"),e._UZ(5,"ion-skeleton-text",8),e.qZA(),e.TgZ(6,"p"),e._UZ(7,"ion-skeleton-text",16),e.qZA()(),e._UZ(8,"ion-skeleton-text",17),e.qZA())}const y=function(){return[]};function f(a,r){1&a&&(e.ynx(0),e.TgZ(1,"ion-list-header",7)(2,"ion-label"),e._UZ(3,"ion-skeleton-text",8),e.qZA(),e.TgZ(4,"ion-note",9),e._UZ(5,"ion-skeleton-text",10),e.qZA()(),e.TgZ(6,"ion-list",11),e.YNc(7,T,9,0,"ion-item",12),e.qZA(),e.BQk()),2&a&&(e.xp6(7),e.Q6J("ngForOf",e.DdM(1,y).constructor(12)))}function x(a,r){if(1&a&&(e.TgZ(0,"ion-list",27)(1,"ion-item",28)(2,"ion-label")(3,"p"),e._uU(4,"Secci\xf3n:"),e.qZA()(),e._UZ(5,"ion-input",29),e.qZA(),e.TgZ(6,"ion-item",28)(7,"ion-label")(8,"p"),e._uU(9,"Fecha:"),e.qZA()(),e._UZ(10,"ion-input",29),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"ion-item",28)(13,"ion-label")(14,"p"),e._uU(15,"Horario:"),e.qZA()(),e._UZ(16,"ion-input",29),e.qZA()()),2&a){const o=e.oxw(2);e.xp6(5),e.s9C("value",o.claseInfoReceived.nombre_seccion),e.xp6(5),e.s9C("value",e.xi3(11,4,o.claseInfoReceived.fecha,"dd MMM, yyyy")),e.xp6(6),e.hYB("value","",o.claseInfoReceived.hora_inicio.slice(0,5)," a ",o.claseInfoReceived.hora_termino.slice(0,5),"")}}function D(a,r){1&a&&(e.ynx(0),e.TgZ(1,"div")(2,"ion-card-title"),e._UZ(3,"ion-skeleton-text",35),e.qZA(),e.TgZ(4,"ion-card-subtitle"),e._UZ(5,"ion-skeleton-text",36),e.qZA()(),e.TgZ(6,"ion-badge",37),e._UZ(7,"ion-skeleton-text",38),e.qZA(),e._UZ(8,"ion-skeleton-text",39),e.BQk())}function c(a,r){if(1&a&&(e.ynx(0),e.TgZ(1,"div",40),e._UZ(2,"qrcode",41),e.qZA(),e.BQk()),2&a){const o=e.oxw(3);e.xp6(2),e.Q6J("qrdata",o.qrdata)("ariaLabel","C\xf3digo QR de asistencia...")("colorDark","#000000ff")("colorLight","#ffffffff")("elementType","canvas")("errorCorrectionLevel","M")("imageSrc","../assets/logo.png")("imageHeight",50)("imageWidth",50)("margin",4)("scale",1)("title","C\xf3digo QR de asistencia")("width",o.width)}}function d(a,r){if(1&a){const o=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-title",30),e._uU(3,"Qr de Asistencia"),e.qZA(),e.TgZ(4,"ion-buttons",31)(5,"ion-button",32),e.NdJ("click",function(){e.CHM(o);const s=e.oxw(2);return e.KtG(s.confirm())}),e._uU(6,"cerrar"),e.qZA()()()(),e._UZ(7,"hr"),e.TgZ(8,"ion-content",33)(9,"ion-list-header",7)(10,"ion-label")(11,"ion-text",18),e._uU(12,"Escanee Qr con RegistrAPP"),e.qZA()()(),e.TgZ(13,"ion-card",34),e.YNc(14,D,9,0,"ng-container",6),e.YNc(15,c,3,13,"ng-container",6),e.qZA()()}if(2&a){const o=e.oxw(2);e.xp6(5),e.Q6J("strong",!0),e.xp6(3),e.Q6J("fullscreen",!0),e.xp6(6),e.Q6J("ngIf",!o.content_loaded),e.xp6(1),e.Q6J("ngIf",o.content_loaded)}}function u(a,r){if(1&a&&(e.TgZ(0,"ion-list",27)(1,"ion-item",42)(2,"ion-avatar",14),e._UZ(3,"ion-icon",43),e.qZA(),e.TgZ(4,"ion-label")(5,"p",22),e._uU(6),e.ALo(7,"titlecase"),e.ALo(8,"titlecase"),e.ALo(9,"titlecase"),e.qZA()()()()),2&a){const o=r.$implicit;e.xp6(6),e.lnq(" ",e.lcZ(7,3,o.alumnos.nombre)," ",e.lcZ(8,5,o.alumnos.apellido_paterno)," ",e.lcZ(9,7,o.alumnos.apellido_materno),". ")}}function h(a,r){if(1&a){const o=e.EpF();e.ynx(0),e.TgZ(1,"ion-list-header",7)(2,"ion-label"),e._UZ(3,"ion-text",18),e.qZA()(),e.YNc(4,x,17,7,"ion-list",19),e.TgZ(5,"ion-list-header",7)(6,"ion-label")(7,"ion-text",18),e._uU(8,"Acciones"),e.qZA()()(),e.TgZ(9,"ion-item",20)(10,"ion-avatar",14),e._UZ(11,"ion-icon",21),e.qZA(),e.TgZ(12,"ion-label")(13,"p",22),e._uU(14,"Genere c\xf3digo QR"),e.qZA()(),e.TgZ(15,"ion-button",23),e._uU(16," Generar "),e.qZA(),e.TgZ(17,"ion-modal",24),e.NdJ("willDismiss",function(s){e.CHM(o);const g=e.oxw();return e.KtG(g.onWillDismiss(s))}),e.YNc(18,d,16,4,"ng-template"),e.qZA()(),e._UZ(19,"hr",25),e.TgZ(20,"ion-list-header",7)(21,"ion-label")(22,"ion-text",18),e._uU(23),e.qZA()()(),e.YNc(24,u,10,9,"ion-list",26),e.BQk()}if(2&a){const o=e.oxw();e.xp6(4),e.Q6J("ngIf",o.content_loaded&&o.claseInfoReceived),e.xp6(19),e.hij("Alumnos en la Secci\xf3n: ",o.alumnosPorClase.length,""),e.xp6(1),e.Q6J("ngForOf",o.alumnosPorClase)}}let l=(()=>{var a;class r{cancel(){this.modal.dismiss(null,"cancel")}confirm(){this.modal.dismiss(this.name,"confirm")}onWillDismiss(n){"confirm"===n.detail.role&&(this.message=`Hello, ${n.detail.data}!`)}constructor(n,s,g,M){this.router=n,this.activatedRoute=s,this.clasesService=g,this.asistenciaService=M,this.content_loaded=!1,this.message="This modal example uses triggers to automatically open a modal when the button is clicked.",this.title="RegistrAPP - QR Code Generator",this.qrdata=null,this.elementType=null,this.elementType="img",this.level="M",this.scale=1,this.width=256}ngOnInit(){var n=this;return(0,m.Z)(function*(){try{var s;n.claseInfoReceived=null===(s=n.router.getCurrentNavigation())||void 0===s||null===(s=s.extras.state)||void 0===s?void 0:s.clase,n.alumnosPorClase=yield(0,P.z)(n.clasesService.getgetAlumnosBySeccion(n.claseInfoReceived.seccion_id)),n.alumnosPorClase.sort((g,M)=>g.alumnos.apellido_paterno.charAt(0).localeCompare(M.alumnos.apellido_paterno.charAt(0))),n.asistenciaByClase=yield(0,P.z)(n.asistenciaService.getAsistenciaByClaseId(n.claseInfoReceived.id)),n.qrdata=n.asistenciaByClase[0].id,n.content_loaded=!0}catch(g){console.error("Error Trayendo los datos de la clases:",g)}})()}goToClasesTab(){this.router.navigate(["teacher","tabs","tab2"])}countTotalAlumnos(n){return n+1}changeElementType(n){this.elementType=n}changeLevel(n){this.level=n}changeQrdata(n){this.qrdata=n}changeScale(n){this.scale=n}changeWidth(n){this.width=n}}return(a=r).\u0275fac=function(n){return new(n||a)(e.Y36(C.F0),e.Y36(C.gz),e.Y36(A.F),e.Y36(E.l))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-clase-detalles"]],viewQuery:function(n,s){if(1&n&&e.Gf(t.ki,5),2&n){let g;e.iGM(g=e.CRH())&&(s.modal=g.first)}},standalone:!0,features:[e.jDz],decls:10,vars:3,consts:[["collapse","fade",3,"translucent"],["color","dark"],["slot","start"],["color","secondary","text","Atr\xe1s",3,"click"],[1,"centered-title"],[1,"ion-padding"],[4,"ngIf"],[1,"ion-list-header-small"],["animated","",2,"width","50%"],["color","tertiary",1,"ion-note-small"],["animated","",2,"width","40px"],["lines","full",1,"list-custom","animate__animated","animate__fadeIn"],["color","primary","button","","detail","false",4,"ngFor","ngForOf"],["color","primary","button","","detail","false"],["slot","start",1,"ion-avatar-default-icon"],["animated",""],["animated","",2,"width","75%"],["slot","end","animated","",2,"width","15%"],["color","tertiary"],["class","list-custom","lines","full",4,"ngIf"],["color","primary","detail","false"],["color","tertiary","size","large","name","qr-code-outline",1,"heart"],[1,"font-size-smallest"],["id","open-modal-qr","color","secondary"],["trigger","open-modal-qr",3,"willDismiss"],[1,"hr-medium"],["class","list-custom","lines","full",4,"ngFor","ngForOf"],["lines","full",1,"list-custom"],["color","primary"],["readonly","",1,"font-size-small","ion-text-right","ion-no-padding-end",3,"value"],["slot","primary"],["slot","end"],[3,"strong","click"],[1,"ion-padding",3,"fullscreen"],["color","--ion-color-dark",1,"ion-no-margin","ion-card-chart","animate__animated","animate__fadeIn"],["animated","",2,"width","60px"],["animated","",2,"width","80px"],["color","primary","mode","ios"],["animated","",2,"width","50px"],["animated","",2,"width","calc(100% - 40px)","margin","16px auto 16px auto","min-height","140px"],[1,"qrcodeImage","centered-text"],[1,"demoBorderRadius",3,"qrdata","ariaLabel","colorDark","colorLight","elementType","errorCorrectionLevel","imageSrc","imageHeight","imageWidth","margin","scale","title","width"],["color","primary","detail","false","button",""],["color","tertiary","size","large","name","person-circle-outline"]],template:function(n,s){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-back-button",3),e.NdJ("click",function(){return s.goToClasesTab()}),e.qZA()(),e.TgZ(4,"ion-title",4),e._uU(5," Clase "),e.qZA()()(),e.TgZ(6,"ion-content")(7,"div",5),e.YNc(8,f,8,2,"ng-container",6),e.YNc(9,h,25,3,"ng-container",6),e.qZA()()),2&n&&(e.Q6J("translucent",!0),e.xp6(8),e.Q6J("ngIf",!s.content_loaded),e.xp6(1),e.Q6J("ngIf",s.content_loaded))},dependencies:[t.Pc,t.BJ,t.oU,t.yp,t.YG,t.Sm,t.PM,t.tO,t.Dq,t.W2,t.Gu,t.gu,t.pK,t.Ie,t.Q$,t.q_,t.yh,t.uN,t.CK,t.yW,t.wd,t.sr,t.ki,t.j9,t.cs,_.ez,_.sg,_.O5,_.rS,_.uU,v.u5,p.N,p.V],styles:["[_nghost-%COMP%]   body[_ngcontent-%COMP%]{background-color:var(--ion-color-dark)}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%], [_nghost-%COMP%]   .toolbar-search[_ngcontent-%COMP%]{--background: linear-gradient( 135deg, var(--ion-color-dark), var(--ion-color-primary) )}[_nghost-%COMP%]   ion-list[_ngcontent-%COMP%]{border-radius:8px;margin-bottom:8px;background-color:var(--ion-color-primary)}[_nghost-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.centered-title[_ngcontent-%COMP%]{text-align:center;width:70%}.heart[_ngcontent-%COMP%]{color:red;font-size:14px;animation:_ngcontent-%COMP%_heart-pulse 5s infinite ease-out}@keyframes _ngcontent-%COMP%_heart-pulse{0%{transform:scale(0)}50%{transform:scale(.8)}70%{transform:scale(.65)}to{transform:scale(0)}}.qrcodeImage[_ngcontent-%COMP%]{display:flex;flex:1;justify-content:center}.demoBorderRadius[_ngcontent-%COMP%]{border:dashed;border-width:2px 4px;border-radius:40px;overflow:hidden}"]}),r})()},1559:(U,Z,i)=>{i.d(Z,{F:()=>y});var m=i(9862),_=i(7398),v=i(9397),t=i(553),P=i(46),p=i(6689),e=i(8828),C=i(2333);let y=(()=>{var f;class x{constructor(c,d,u){this.http=c,this.router=d,this.authService=u,this.apiUrlSecciones=t.N.supabaseUrl+"/rest/v1/secciones",this.apiUrlSeccionesAlumnos=t.N.supabaseUrl+"/rest/v1/secciones_alumnos",this.apiUrlClases=t.N.supabaseUrl+"/rest/v1/clases",this.supabase=(0,P.eI)(t.N.supabaseUrl,t.N.supabaseKey)}getProfesorClasesListAll(c){const d=new m.WM({apikey:t.N.supabaseKey,Authorization:`Bearer ${t.N.supabaseKey}`,Range:"0-9"});return this.http.get(`${this.apiUrlSecciones}`,{headers:d,params:{profesor_id:`eq.${c}`,select:"*,clases(*)"}}).pipe((0,_.U)(h=>{const l=[];return h.forEach(a=>{a.clases.forEach(r=>{l.push({id:r.id,fecha:r.fecha,hora_inicio:r.hora_inicio,hora_termino:r.hora_termino,seccion_id:r.seccion_id,nombre_seccion:a.nombre_seccion,profesor_id:a.profesor_id,asignatura_id:a.asignatura_id})})}),l}))}getProfesorClasesListCurrentDay(c,d){const u=new m.WM({apikey:t.N.supabaseKey,Authorization:`Bearer ${t.N.supabaseKey}`});return this.http.get(`${this.apiUrlSecciones}`,{headers:u,params:{profesor_id:`eq.${c}`,select:"*,clases(*)"}}).pipe((0,v.b)(l=>console.log("API Response:",l)),(0,_.U)(l=>{const r=[];return l.forEach(o=>{o.clases.forEach(n=>{new Date(n.fecha),n.fecha==d&&r.push({id:n.id,fecha:n.fecha,hora_inicio:n.hora_inicio,hora_termino:n.hora_termino,seccion_id:n.seccion_id,nombre_seccion:o.nombre_seccion,profesor_id:o.profesor_id,asignatura_id:o.asignatura_id})})}),r}))}getgetAlumnosBySeccion(c){const d=new m.WM({apikey:t.N.supabaseKey,Authorization:`Bearer ${t.N.supabaseKey}`});return this.http.get(`${this.apiUrlSeccionesAlumnos}`,{headers:d,params:{seccion_id:`eq.${c}`,select:"*,alumnos(*)"}})}getClasesAndSeccionbyFecha(c){const d=new m.WM({apikey:t.N.supabaseKey,Authorization:`Bearer ${t.N.supabaseKey}`});return this.http.get(this.apiUrlClases,{headers:d,params:{fecha:`eq.${c}`,select:"*,seccion_id(*)"}}).pipe((0,v.b)(h=>console.log("API Response:",h)),(0,_.U)(h=>h.map(l=>{const a=l.seccion_id;return{id:l.id,fecha:l.fecha,hora_inicio:l.hora_inicio,hora_termino:l.hora_termino,seccion_id:a.id,nombre_seccion:a.nombre_seccion,profesor_id:a.profesor_id,asignatura_id:a.asignatura_id}})))}}return(f=x).\u0275fac=function(c){return new(c||f)(p.LFG(m.eN),p.LFG(e.F0),p.LFG(C.e))},f.\u0275prov=p.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),x})()},4036:(U,Z,i)=>{i.d(Z,{z:()=>v});var m=i(6973),_=i(305);function v(t,P){const p="object"==typeof P;return new Promise((e,C)=>{const A=new _.Hp({next:E=>{e(E),A.unsubscribe()},error:C,complete:()=>{p?e(P.defaultValue):C(new m.K)}});t.subscribe(A)})}}}]);